version: '3.8'

services:
  downlist:
    build:
      context: .
      dockerfile: Dockerfile
    # 或者使用远程镜像（需要先推送到 Docker Hub）
    # image: your-dockerhub-username/downlist:latest
    container_name: downlist
    ports:
      - "8550:8550"
    volumes:
      # 下载目录映射到本地
      - ./downloads:/app/downloads
      # Cookie 文件映射
      - ./cookie.txt:/app/cookie.txt:ro
      # 日志文件
      - ./download.log:/app/download.log
    environment:
      - FLET_SERVER_PORT=8550
      - FLET_FORCE_WEB_VIEW=true
    restart: unless-stopped
    # 健康检查
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8550"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

# 可选：使用外部网络
# networks:
#   default:
#     external:
#       name: my-network
